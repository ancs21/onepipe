@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=Instrument+Serif:ital@0;1&family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Light mode (default) - RGB values for Tailwind opacity support */
  :root {
    --bg-primary: 250 250 249;
    --bg-secondary: 255 255 255;
    --bg-tertiary: 245 245 243;
    --bg-elevated: 255 255 255;
    --bg-wash: 248 247 246;
    --border: 232 229 227;
    --border-subtle: 242 240 238;
    --border-hover: 212 208 204;
    --text-primary: 26 25 24;
    --text-secondary: 82 80 73;
    --text-muted: 156 152 145;
    --accent: 80 70 229;
    --accent-hover: 64 58 204;
    --accent-muted: 80 70 229;
    --accent-light: 238 238 255;
    /* Syntax highlighting colors */
    --syntax-key: #2563eb;
    --syntax-string: #059669;
    --syntax-number: #d97706;
    --syntax-boolean: #7c3aed;
    --syntax-null: #71717a;
  }

  /* Dark mode */
  .dark {
    --bg-primary: 10 10 11;
    --bg-secondary: 17 17 19;
    --bg-tertiary: 24 24 27;
    --bg-elevated: 28 28 31;
    --bg-wash: 20 20 22;
    --border: 39 39 42;
    --border-subtle: 31 31 34;
    --border-hover: 63 63 70;
    --text-primary: 250 250 250;
    --text-secondary: 161 161 170;
    --text-muted: 113 113 122;
    --accent: 99 102 241;
    --accent-hover: 129 140 248;
    --accent-muted: 99 102 241;
    --accent-light: 30 27 75;
    /* Syntax highlighting colors - brighter for dark mode */
    --syntax-key: #60a5fa;
    --syntax-string: #34d399;
    --syntax-number: #fbbf24;
    --syntax-boolean: #a78bfa;
    --syntax-null: #a1a1aa;
  }

  /* Database Explorer specific - amber accent */
  :root {
    --db-accent: 245 158 11;
    --db-accent-hover: 217 119 6;
    --db-accent-muted: 120 53 15;
    --db-surface: 23 23 23;
    --db-surface-hover: 38 38 38;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-bg-primary text-text-primary antialiased;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: rgb(var(--border-hover) / 0.6);
    border-radius: 9999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgb(var(--text-muted) / 0.5);
  }

  /* Selection */
  ::selection {
    @apply bg-accent/20 text-text-primary;
  }
}

@layer components {
  /* Subtle dot pattern - adapts to theme */
  .grid-bg {
    background-image: radial-gradient(circle at 1px 1px, rgb(0 0 0 / 0.03) 1px, transparent 0);
    background-size: 20px 20px;
  }

  .dark .grid-bg {
    background-image: radial-gradient(circle at 1px 1px, rgb(255 255 255 / 0.03) 1px, transparent 0);
  }

  /* Glow effects - subtle for light mode */
  .glow-line {
    @apply absolute left-0 right-0 h-px bg-gradient-to-r from-transparent via-accent/30 to-transparent;
  }

  /* Method badges - refined with better contrast */
  .method-badge {
    @apply px-2 py-0.5 rounded-md text-xs font-mono font-semibold uppercase tracking-wide;
  }

  .method-badge-get {
    @apply bg-emerald-50 text-emerald-700 border border-emerald-200/60;
  }

  .method-badge-post {
    @apply bg-blue-50 text-blue-700 border border-blue-200/60;
  }

  .method-badge-put {
    @apply bg-amber-50 text-amber-700 border border-amber-200/60;
  }

  .method-badge-patch {
    @apply bg-violet-50 text-violet-700 border border-violet-200/60;
  }

  .method-badge-delete {
    @apply bg-red-50 text-red-700 border border-red-200/60;
  }

  /* Log level badges - cleaner for light mode */
  .log-badge {
    @apply px-1.5 py-0.5 rounded text-2xs font-mono font-semibold uppercase;
  }

  .log-badge-debug {
    @apply bg-gray-100 text-gray-600;
  }

  .log-badge-info {
    @apply bg-blue-50 text-blue-700;
  }

  .log-badge-warn {
    @apply bg-amber-50 text-amber-700;
  }

  .log-badge-error {
    @apply bg-red-50 text-red-700;
  }

  .log-badge-fatal {
    @apply bg-red-100 text-red-800;
  }

  /* Status indicators */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-dot-ok {
    @apply bg-status-success;
    box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.15);
  }

  .status-dot-error {
    @apply bg-status-error;
    box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.15);
  }

  .status-dot-pending {
    @apply bg-status-warning animate-pulse;
  }

  /* Card styles - with subtle shadows */
  .card {
    @apply bg-bg-secondary border border-border rounded-xl shadow-card;
  }

  .card-elevated {
    @apply bg-bg-elevated border border-border rounded-xl shadow-elevated;
  }

  /* Interactive elements */
  .interactive {
    @apply transition-all duration-150 cursor-pointer;
  }

  .interactive:hover {
    @apply bg-bg-tertiary;
  }

  /* Focus ring */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-bg-primary;
  }

  /* Trace waterfall - adjusted for light */
  .trace-bar {
    @apply h-3 rounded-sm bg-accent relative;
  }

  .trace-bar::after {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-white/30 to-transparent rounded-sm;
  }

  /* Logo typography - refined contrast */
  .logo-text {
    font-family: 'DM Sans', system-ui, sans-serif;
    font-weight: 600;
    letter-spacing: -0.02em;
  }

  .logo-text .logo-accent {
    @apply text-accent;
  }

  /* Refined button styles */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-lg;
    @apply transition-all duration-150 ease-out;
  }

  .btn-primary {
    @apply bg-accent text-white hover:bg-accent-hover;
    @apply shadow-sm hover:shadow-md;
  }

  .btn-secondary {
    @apply bg-bg-tertiary text-text-secondary hover:bg-border hover:text-text-primary;
  }

  .btn-ghost {
    @apply text-text-muted hover:text-text-primary hover:bg-bg-tertiary;
  }

  /* Input styles */
  .input {
    @apply w-full px-3 py-2 text-sm bg-bg-secondary border border-border rounded-lg;
    @apply text-text-primary placeholder:text-text-muted;
    @apply focus:outline-none focus:ring-2 focus:ring-accent/20 focus:border-accent;
    @apply transition-all duration-150;
  }

  /* Tab styles */
  .tabs {
    @apply flex gap-1 p-1 bg-bg-tertiary rounded-lg;
  }

  .tab {
    @apply px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-150;
    @apply text-text-muted hover:text-text-secondary;
  }

  .tab-active {
    @apply bg-bg-secondary text-text-primary shadow-sm;
  }

  /* Badge refinements */
  .badge {
    @apply inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full;
  }

  .badge-accent {
    @apply bg-accent/10 text-accent;
  }

  .badge-muted {
    @apply bg-bg-tertiary text-text-muted;
  }

  /* Divider */
  .divider {
    @apply h-px bg-border my-4;
  }

  /* Skeleton loading */
  .skeleton {
    @apply bg-bg-tertiary animate-pulse rounded;
  }

  /* Stat cards for dashboard metrics */
  .stat-card {
    @apply px-4 py-3 bg-bg-secondary/50 border border-border/50 rounded-lg;
  }

  /* Slide animations */
  @keyframes slide-down {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-left {
    from {
      opacity: 0;
      transform: translateX(16px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-slide-down {
    animation: slide-down 0.2s ease-out;
  }

  .animate-slide-up {
    animation: slide-up 0.2s ease-out;
  }

  .animate-slide-left {
    animation: slide-left 0.25s ease-out;
  }
}

@layer utilities {
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-text-primary to-text-secondary;
  }

  .border-gradient {
    border-image: linear-gradient(to right, theme('colors.accent.DEFAULT'), theme('colors.status.info')) 1;
  }
}
